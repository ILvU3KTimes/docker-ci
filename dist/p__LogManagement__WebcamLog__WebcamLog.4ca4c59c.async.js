(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"0fZj":function(e,t,a){e.exports={webcamLog:"antd-pro-pages-log-management-webcam-log-webcam-log-webcamLog"}},Es0M:function(e,t,a){"use strict";a.r(t);a("Awhp");var n,r,o,c=a("KrTs"),i=(a("14J3"),a("BMrR")),l=(a("+L6B"),a("2/Rp")),d=(a("OaEy"),a("2fM7")),s=(a("nRaC"),a("5RzL")),m=(a("jCWc"),a("kPKH")),g=a("gWZ8"),u=a.n(g),h=a("p0pE"),p=a.n(h),f=a("2Taf"),v=a.n(f),w=a("vZ4D"),I=a.n(w),y=a("l4Ni"),E=a.n(y),b=a("ujKo"),D=a.n(b),L=a("MhPg"),k=a.n(L),C=(a("iQDF"),a("+eQT")),Y=(a("y8nQ"),a("Vl3Y")),M=a("q1tI"),S=a.n(M),O=a("jwXe"),R=a("wd/R"),x=a.n(R),F=a("MuoO"),H=a("0fZj"),P=a.n(H);function T(e,t,a){return t=D()(t),E()(e,j()?Reflect.construct(t,a||[],D()(e).constructor):t.apply(e,a))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(j=function(){return!!e})()}var N=Y["a"].Item,B=C["a"].RangePicker,K=(n=Y["a"].create(),r=Object(F["connect"])(function(e){var t=e.webcamLog,a=e.loading;return{webcamLog:t,loading:a.models.webcamLog}}),n(o=r(o=function(e){function t(e){var a;return v()(this,t),a=T(this,t,[e]),a.handleSearch=function(e){var t=p()({},e),n=a.props.dispatch;t.time&&0!==t.time.length&&(t=p()({},e,{startTime:t.time[0].format("YYYY-MM-DD HH:mm:ss"),endTime:t.time[1].format("YYYY-MM-DD HH:mm:ss")}),delete t.time),t.deviceIds&&(t.deviceIds=a.deviceIds),console.log("params",t),n({type:"webcamLog/fetchList",payload:t})},a.onRegionChange=function(e){var t=u()(e);a.regionIds=[],t.forEach(function(e){a.regionIds.push(e.value)}),console.log("selectedRegionIds",a.regionIds),a.getDeviceIds(a.regionIds)},a.onDeviceChange=function(e){var t=u()(e),n=[];t.forEach(function(e){n.push(e.value)}),console.log("this.regionIds",a.regionIds),0===n.length&&a.regionIds.length>0?a.getDeviceIds(a.regionIds):a.deviceIds=n},a.renderSearchForm=function(e){var t=a.props,n=t.form,r=t.webcamLog,o=r.regionData,c=void 0===o?[]:o,g=r.deviceData,u=void 0===g?[]:g,h=(r.webcamStatus,n.getFieldDecorator),p={treeData:c,onChange:a.onRegionChange,treeCheckable:!0,treeCheckStrictly:!0,treeNodeFilterProp:"title",searchPlaceholder:"\u8bf7\u9009\u62e9\u533a\u57df",style:{width:"100%",overflow:"auto"},dropdownStyle:{maxHeight:400,overflow:"auto"}},f={treeData:u,onChange:a.onDeviceChange,treeCheckable:!0,treeCheckStrictly:!0,treeNodeFilterProp:"title",searchPlaceholder:"\u8bf7\u9009\u62e9\u6444\u50cf\u5934",style:{width:"100%",overflow:"auto"},dropdownStyle:{maxHeight:400,overflow:"auto"}};return S.a.createElement(i["a"],{gutter:{md:8,lg:24,xl:48},className:P.a.webcamLog},S.a.createElement(m["a"],{md:7,sm:24},S.a.createElement(Y["a"].Item,{label:"\u65e5\u671f"},h("time",{initialValue:""})(S.a.createElement(B,{ranges:{"\u4eca\u65e5":[x()().startOf("day"),x()().endOf("day")],"\u672c\u6708":[x()().startOf("month"),x()()]},showTime:!0,disabledDate:function(e){return e&&e>x()().endOf("day")},format:"YYYY-MM-DD HH:mm:ss"})))),S.a.createElement(m["a"],{md:5,sm:24},S.a.createElement(N,{label:"\u533a\u57df"},h("regionIds")(S.a.createElement(s["a"],p)))),S.a.createElement(m["a"],{md:5,sm:24},S.a.createElement(N,{label:"\u6444\u50cf\u5934"},h("deviceIds")(S.a.createElement(s["a"],f)))),S.a.createElement(m["a"],{md:4,sm:24},S.a.createElement(N,{label:"\u72b6\u6001"},h("type")(S.a.createElement(d["a"],{placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001",allowClear:!0},S.a.createElement(d["a"].Option,{key:"\u4e0a\u7ebf",value:"\u4e0a\u7ebf"},"\u4e0a\u7ebf"),S.a.createElement(d["a"].Option,{key:"\u4e0b\u7ebf",value:"\u4e0b\u7ebf"},"\u4e0b\u7ebf"),S.a.createElement(d["a"].Option,{key:"\u5fc3\u8df3",value:"\u5fc3\u8df3"},"\u5fc3\u8df3"))))),S.a.createElement(m["a"],null,S.a.createElement("div",{style:{float:"right"}},S.a.createElement(l["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),S.a.createElement(l["a"],{style:{marginLeft:8},onClick:e},"\u91cd\u7f6e"))))},a.getDeviceIds=function(e){var t=a.props,n=t.dispatch,r=t.form.setFieldsValue;r({deviceIds:[]}),a.deviceIds=[],n({type:"webcamLog/fetchDeviceData",payload:{regionIds:e}}).then(function(){var e=a.props.webcamLog.deviceData;e.forEach(function(e){a.deviceIds.push(e.value)}),console.log("deviceIds",a.deviceIds)})},a.deviceIds=[],a.regionIds=[],a}return k()(t,e),I()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"webcamLog/fetchAreaData"}),e({type:"webcamLog/fetchDeviceData"})}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.loading,n=e.webcamLog.data,r=void 0===n?{}:n,o=[{title:"\u6444\u50cf\u5934ID",dataIndex:"deviceId",align:"center"},{title:"\u6444\u50cf\u5934\u540d\u79f0",dataIndex:"deviceName",align:"center"},{title:"\u6444\u50cf\u5934\u72b6\u6001",dataIndex:"type",align:"center",render:function(e){return S.a.createElement(c["a"],{status:"\u4e0a\u7ebf"===e?"success":"\u4e0b\u7ebf"===e?"error":"default",text:e})}},{title:"\u7ec4\u53f7",dataIndex:"groupNum",align:"center"},{title:"\u65f6\u95f4",dataIndex:"logTime",align:"center"}];return S.a.createElement(O["a"],{form:t,onSearch:this.handleSearch,renderSearchForm:this.renderSearchForm,data:r,rowSelectionProp:null,loading:a,columns:o,pkField:"id",rowKey:"id"})}}])}(M["PureComponent"]))||o)||o);t["default"]=K}}]);